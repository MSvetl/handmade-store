# Тестовое приложение Next.js с API

Это тестовое приложение демонстрирует базовую настройку Next.js проекта с API эндпоинтом и полным покрытием тестами.

## Архитектура проекта

```
handmade-store/
├── app/                      # Основная директория приложения (Next.js 13+ App Router)
│   ├── __tests__/           # Тесты для страниц
│   ├── components/          # React компоненты
│   │   ├── __tests__/      # Тесты для компонентов
│   │   └── Button.tsx      # Переиспользуемый компонент кнопки
│   ├── api/                # API роуты
│   │   └── test/          # Тестовый эндпоинт
│   ├── layout.tsx         # Корневой layout
│   ├── page.tsx           # Главная страница
│   └── globals.css        # Глобальные стили
├── src/
│   ├── __tests__/         # Тесты для API
│   ├── config/           # Конфигурационные файлы
│   ├── lib/             # Вспомогательные функции
│   ├── middleware.ts    # Next.js middleware
│   └── types/          # TypeScript типы
├── jest.config.js      # Конфигурация Jest
├── jest.setup.js       # Настройка тестового окружения
└── tsconfig.json       # Конфигурация TypeScript
```

## Техническое задание

### Цель проекта
Создать тестовое приложение на Next.js 13+ с использованием App Router, демонстрирующее:
- Работу с API
- Настройку тестового окружения
- Типизацию TypeScript
- Современные практики разработки

### Функциональные требования

1. **Главная страница**
   - Отображение заголовка
   - Кнопка для проверки соединения с сервером
   - Индикация загрузки при запросе
   - Отображение результата запроса

2. **API эндпоинт**
   - Роут `/api/test`
   - Возвращает статус работы сервера
   - Обработка ошибок
   - Типизированные ответы

3. **Компоненты**
   - Переиспользуемая кнопка с поддержкой:
     - Состояния disabled
     - Пользовательских классов
     - Обработки кликов
     - Кастомизации через children

### Технические требования

1. **Тестирование**
   - Jest + React Testing Library
   - Тесты для всех компонентов
   - Тесты для API
   - Моки для fetch и роутера
   - Покрытие тестами > 80%

2. **Типизация**
   - Строгая типизация TypeScript
   - Типы для API ответов
   - Интерфейсы для пропсов компонентов

3. **Стилизация**
   - Tailwind CSS
   - Адаптивный дизайн
   - Поддержка тёмной темы

### Возможные проблемы и их решения

1. **Порт 3001 занят**
   ```bash
   # Найти процесс
   netstat -ano | findstr :3001
   # Убить процесс
   taskkill /F /PID <номер_процесса>
   ```

2. **Проблемы с тестами**
   - Убедитесь, что установлены все dev-зависимости
   - Проверьте настройки в jest.config.js и jest.setup.js
   - При ошибках с Response используйте правильные моки

3. **TypeScript ошибки**
   - Проверьте настройки в tsconfig.json
   - Убедитесь в правильности типов API ответов
   - Используйте строгую типизацию для пропсов

## Запуск проекта

```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run dev

# Запуск тестов
npm test

# Запуск тестов с покрытием
npm run test:coverage
```

## Тестирование

### Компоненты
- Проверка рендеринга
- Проверка интерактивности
- Проверка пропсов
- Проверка состояний

### API
- Проверка успешных ответов
- Проверка обработки ошибок
- Валидация форматов данных

## Рекомендации по разработке

1. Следуйте структуре проекта
2. Пишите тесты параллельно с кодом
3. Используйте типизацию
4. Комментируйте сложные места
5. Следите за покрытием тестами 